\hypertarget{jString_8hpp_source}{}\doxysection{j\+String.\+hpp}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{Copyright (c) 2022 Julia Ingleby Clement}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{Permission is hereby granted, free of charge, to any person obtaining a copy}}
\DoxyCodeLine{5 \textcolor{comment}{of this software and associated documentation files (the "{}Software"{}), to deal}}
\DoxyCodeLine{6 \textcolor{comment}{in the Software without restriction, including without limitation the rights}}
\DoxyCodeLine{7 \textcolor{comment}{to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}}
\DoxyCodeLine{8 \textcolor{comment}{copies of the Software, and to permit persons to whom the Software is}}
\DoxyCodeLine{9 \textcolor{comment}{furnished to do so, subject to the following conditions:}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{The above copyright notice and this permission notice shall be included in all}}
\DoxyCodeLine{12 \textcolor{comment}{copies or substantial portions of the Software.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{15 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{16 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}}
\DoxyCodeLine{17 \textcolor{comment}{AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}}
\DoxyCodeLine{18 \textcolor{comment}{LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}}
\DoxyCodeLine{19 \textcolor{comment}{OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE}}
\DoxyCodeLine{20 \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{21 \textcolor{comment}{ */}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{comment}{/* }}
\DoxyCodeLine{24 \textcolor{comment}{ * File:   jString.hpp}}
\DoxyCodeLine{25 \textcolor{comment}{ * Author: Julia Clement <Julia at Clement dot nz>}}
\DoxyCodeLine{26 \textcolor{comment}{ * }}
\DoxyCodeLine{27 \textcolor{comment}{ * Part of the JCLib project https://github.com/juliaclement/jclib}}
\DoxyCodeLine{28 \textcolor{comment}{ *}}
\DoxyCodeLine{29 \textcolor{comment}{ * Created on 15 October 2022, 11:58 AM}}
\DoxyCodeLine{30 \textcolor{comment}{ */}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{ifndef} \textcolor{preprocessor}{jString\_HPP}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{jString\_HPP}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{limits}\textcolor{preprocessor}{>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{cctype}\textcolor{preprocessor}{>}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{cstring}\textcolor{preprocessor}{>}}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{string\_view}\textcolor{preprocessor}{>}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{ostream}\textcolor{preprocessor}{>}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{vector}\textcolor{preprocessor}{>}}
\DoxyCodeLine{39 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{countedPointer_8hpp}{"{}countedPointer.hpp"{}}}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{keyword}{namespace} \mbox{\hyperlink{namespacejclib}{jclib}} \{}
\DoxyCodeLine{42     \textcolor{comment}{/**}}
\DoxyCodeLine{43 \textcolor{comment}{     * Implementation of a reference counted string}}
\DoxyCodeLine{44 \textcolor{comment}{     * This string is lighweight with the string class}}
\DoxyCodeLine{45 \textcolor{comment}{     * itself being little more than a slightly smart pointer.}}
\DoxyCodeLine{46 \textcolor{comment}{     * }}
\DoxyCodeLine{47 \textcolor{comment}{     * Primarily created to satisfy a need I have for}}
\DoxyCodeLine{48 \textcolor{comment}{     * dynamic invariant strings in a re2c/lemon based project}}
\DoxyCodeLine{49 \textcolor{comment}{     * which will be passing a ridiculous number of strings around.}}
\DoxyCodeLine{50 \textcolor{comment}{    */}}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     \textcolor{keyword}{class} \mbox{\hyperlink{classjclib_1_1jString}{jString}};}
\DoxyCodeLine{53     \textcolor{keyword}{namespace} Private \{}
\DoxyCodeLine{54         \textcolor{comment}{// If you get strange crashes, enable this \#define}}
\DoxyCodeLine{55         \textcolor{comment}{// It doubles the number of heap allocations / frees}}
\DoxyCodeLine{56         \textcolor{comment}{// but does it safely. See comment just before "{}char data\_[1]"{}}}
\DoxyCodeLine{57         \textcolor{comment}{//\#define SAFE\_JSTRING 1}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59         \textcolor{keyword}{struct} \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} \{}
\DoxyCodeLine{60             \textcolor{comment}{/**}}
\DoxyCodeLine{61 \textcolor{comment}{             * A class to store the string data.}}
\DoxyCodeLine{62 \textcolor{comment}{            */}}
\DoxyCodeLine{63             \textcolor{keyword}{private}:}
\DoxyCodeLine{64                 \textcolor{keyword}{friend} \textcolor{keyword}{class} \mbox{\hyperlink{namespacejclib}{jclib}}::\mbox{\hyperlink{classjclib_1_1jString}{jString}};}
\DoxyCodeLine{65                 \textcolor{keyword}{friend} \textcolor{keyword}{class} \mbox{\hyperlink{namespacejclib}{jclib}}::\mbox{\hyperlink{classjclib_1_1CountedPointer}{CountedPointer}}<\mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}}>; \textcolor{comment}{// = jString's parent class;}}
\DoxyCodeLine{66                 \textcolor{keyword}{friend} std::ostream\& operator<<(std::ostream\& os, \textcolor{keyword}{const} \textcolor{keyword}{class} \mbox{\hyperlink{namespacejclib}{jclib}}::\mbox{\hyperlink{classjclib_1_1jString}{jString}} \& string);}
\DoxyCodeLine{67                 \textcolor{comment}{// no copy constructor}}
\DoxyCodeLine{68                 jStringBase( \textcolor{keyword}{const} \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} \& ) = \textcolor{keyword}{delete};}
\DoxyCodeLine{69                 \textcolor{comment}{// suppress assignment into the string}}
\DoxyCodeLine{70                 \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}}\& operator = (\textcolor{keyword}{const} \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}}\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{71                 \textcolor{comment}{// Implement the requirements for CountedPointer}}
\DoxyCodeLine{72                 \textcolor{keywordtype}{int} counter\_;}
\DoxyCodeLine{73                 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} CountedPointerAttach() \{ ++counter\_; \}}
\DoxyCodeLine{74                 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} CountedPointerDetach() \{ \textcolor{keywordflow}{if}( !-\/-\/counter\_) \textcolor{keyword}{delete} \textcolor{keyword}{this};\}}
\DoxyCodeLine{75                 \textcolor{comment}{// ctor private so only jString can access it}}
\DoxyCodeLine{76                 jStringBase( \textcolor{keyword}{const} \textcolor{keywordtype}{char} * data, std::size\_t len )}
\DoxyCodeLine{77                 : counter\_(0)}
\DoxyCodeLine{78     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{ifdef} \textcolor{preprocessor}{SAFE\_JSTRING}}
\DoxyCodeLine{79                 , data\_( \textcolor{keyword}{new} \textcolor{keywordtype}{char}[len+1])}
\DoxyCodeLine{80     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{endif}}
\DoxyCodeLine{81                 , len\_( len )}
\DoxyCodeLine{82                 \{}
\DoxyCodeLine{83                     strncpy(data\_, data, len);}
\DoxyCodeLine{84                     data\_[len] = \textcolor{stringliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{85                 \}}
\DoxyCodeLine{86                 \textcolor{comment}{/** create a jStringBase with data */}}
\DoxyCodeLine{87                 \textcolor{keyword}{static} \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} * create(\textcolor{keyword}{const} \textcolor{keywordtype}{char} * data, std::size\_t len) \{}
\DoxyCodeLine{88     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{ifdef} \textcolor{preprocessor}{SAFE\_JSTRING}}
\DoxyCodeLine{89                     \textcolor{comment}{// Double create on heap}}
\DoxyCodeLine{90                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} jStringBase(data, len);}
\DoxyCodeLine{91     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{else}}
\DoxyCodeLine{92                     \textcolor{keywordtype}{void} * new\_store = \textcolor{keyword}{new} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}[len + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}})];}
\DoxyCodeLine{93                     \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} * new\_object= \textcolor{keyword}{new} (new\_store) \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}}(data, len);}
\DoxyCodeLine{94                     \textcolor{keywordflow}{return} new\_object;}
\DoxyCodeLine{95     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{endif}}
\DoxyCodeLine{96                 \}}
\DoxyCodeLine{97                 \textcolor{comment}{/** create an empty jStringBase }}
\DoxyCodeLine{98 \textcolor{comment}{                 *  used by join() to create a place to write the answer}}
\DoxyCodeLine{99 \textcolor{comment}{                 *  into otherwise a bug in calling routine unless len == 0}}
\DoxyCodeLine{100 \textcolor{comment}{                 *  when it has the same effect as jStringBase( "{}"{}, 0 )}}
\DoxyCodeLine{101 \textcolor{comment}{                */}}
\DoxyCodeLine{102                 \textcolor{keyword}{static} \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} * create(std::size\_t len) \{}
\DoxyCodeLine{103     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{ifdef} \textcolor{preprocessor}{SAFE\_JSTRING}}
\DoxyCodeLine{104                     \textcolor{comment}{// Double create on heap}}
\DoxyCodeLine{105                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} jStringBase(data, len);}
\DoxyCodeLine{106     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{else}}
\DoxyCodeLine{107                     \textcolor{keywordtype}{void} * new\_store = \textcolor{keyword}{new} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}[len + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}})];}
\DoxyCodeLine{108                     \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} * new\_object= \textcolor{keyword}{new} (new\_store) \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}}(\textcolor{stringliteral}{"{}"{}}, len);}
\DoxyCodeLine{109                     \textcolor{keywordflow}{return} new\_object;}
\DoxyCodeLine{110     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{endif}}
\DoxyCodeLine{111                 \}}
\DoxyCodeLine{112     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{ifdef} \textcolor{preprocessor}{SAFE\_JSTRING}}
\DoxyCodeLine{113                 \textcolor{keyword}{virtual} \string~\mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}}() \{}
\DoxyCodeLine{114                     \textcolor{keyword}{delete} \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{data\_}};}
\DoxyCodeLine{115                 \}}
\DoxyCodeLine{116     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{endif}}
\DoxyCodeLine{117                 std::size\_t len\_;}
\DoxyCodeLine{118     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{ifdef} \textcolor{preprocessor}{SAFE\_JSTRING}}
\DoxyCodeLine{119                 \textcolor{comment}{// Not the most efficient, but portable.}}
\DoxyCodeLine{120                 \textcolor{keywordtype}{char} * \mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{data\_}};}
\DoxyCodeLine{121     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{else}}
\DoxyCodeLine{122                 \textcolor{comment}{// **** This MUST be the last data member in the struct as}}
\DoxyCodeLine{123                 \textcolor{comment}{// we deliberately allocate padding then overrun the declared}}
\DoxyCodeLine{124                 \textcolor{comment}{// length of the array.}}
\DoxyCodeLine{125                 \textcolor{comment}{//}}
\DoxyCodeLine{126                 \textcolor{comment}{// I think it's safe as:}}
\DoxyCodeLine{127                 \textcolor{comment}{// C99 requires that struct members are laid out in}}
\DoxyCodeLine{128                 \textcolor{comment}{// declaration order:}}
\DoxyCodeLine{129                 \textcolor{comment}{//     "{}Within a structure object, the non-\/bit-\/field members}}
\DoxyCodeLine{130                 \textcolor{comment}{//     and the units in which bit-\/fields reside have addresses}}
\DoxyCodeLine{131                 \textcolor{comment}{//     that increase in the order in which they are declared"{}}}
\DoxyCodeLine{132                 \textcolor{comment}{// C++ probably requires that in a standard-\/layout struct}}
\DoxyCodeLine{133                 \textcolor{comment}{// object struct members are laid out in declaration order.}}
\DoxyCodeLine{134                 \textcolor{comment}{// Problem is I can't seem to locate it in an actual C++ standard}}
\DoxyCodeLine{135                 \textcolor{comment}{// but every compiler I know works that way.}}
\DoxyCodeLine{136                 \textcolor{comment}{//}}
\DoxyCodeLine{137                 \textcolor{comment}{// If you get strange crashes, try defining SAFE\_JSTRING above}}
\DoxyCodeLine{138                 \textcolor{keywordtype}{char} data\_[1];}
\DoxyCodeLine{139     \textcolor{preprocessor}{\#}\textcolor{preprocessor}{endif}}
\DoxyCodeLine{140             \textcolor{keyword}{public}:}
\DoxyCodeLine{141                 operator \textcolor{keyword}{const} \textcolor{keywordtype}{char} *() \textcolor{keyword}{const} \{ \textcolor{keywordflow}{return} data\_;\};}
\DoxyCodeLine{142                 \textcolor{keyword}{auto} len() \textcolor{keyword}{const} \{ \textcolor{keywordflow}{return} len\_;\}}
\DoxyCodeLine{143             \};}
\DoxyCodeLine{144     \};}
\DoxyCodeLine{145 }
\DoxyCodeLine{146     \textcolor{keyword}{class} \mbox{\hyperlink{classjclib_1_1jString}{jString}}: \textcolor{comment}{/* private */} \mbox{\hyperlink{classjclib_1_1CountedPointer}{CountedPointer}}<Private::\mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}}> \{}
\DoxyCodeLine{147         \textcolor{comment}{/***}}
\DoxyCodeLine{148 \textcolor{comment}{         * The user interface to the strings}}
\DoxyCodeLine{149 \textcolor{comment}{        */}}
\DoxyCodeLine{150         \textcolor{keyword}{private}:}
\DoxyCodeLine{151             \textcolor{keyword}{typedef} Private::\mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} jStringBase;}
\DoxyCodeLine{152         \textcolor{keyword}{public}:}
\DoxyCodeLine{153             \textcolor{comment}{/** return an empty string.}}
\DoxyCodeLine{154 \textcolor{comment}{             *  We use so many it makes sense to pre-\/create one}}
\DoxyCodeLine{155 \textcolor{comment}{            */}}
\DoxyCodeLine{156             \textcolor{keyword}{static} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{get\_empty}}() \{}
\DoxyCodeLine{157                 \textcolor{keyword}{static} jStringBase * empty\_base = \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{158                 \textcolor{keyword}{static} \textcolor{keywordtype}{bool} first = \textcolor{keyword}{true};}
\DoxyCodeLine{159                 \textcolor{keywordflow}{if}( first ) \{}
\DoxyCodeLine{160                     empty\_base = jStringBase::create(\textcolor{stringliteral}{"{}"{}}, 0);}
\DoxyCodeLine{161                     empty\_base-\/>CountedPointerAttach(); \textcolor{comment}{// ensure never deleted}}
\DoxyCodeLine{162                     first = \textcolor{keyword}{false};}
\DoxyCodeLine{163                 \}}
\DoxyCodeLine{164                 \textcolor{keyword}{static} \mbox{\hyperlink{classjclib_1_1jString}{jString}} empty\_string( empty\_base );}
\DoxyCodeLine{165                 \textcolor{keywordflow}{return} empty\_string;}
\DoxyCodeLine{166             \}}
\DoxyCodeLine{167 }
\DoxyCodeLine{168             \textcolor{keyword}{const} \textcolor{keywordtype}{char} * data() \textcolor{keyword}{const} \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_;\}}
\DoxyCodeLine{169 }
\DoxyCodeLine{170             operator \textcolor{keyword}{const} \textcolor{keywordtype}{char} *() \textcolor{keyword}{const} \{ \textcolor{keywordflow}{return} (*\textcolor{keyword}{this})-\/>data\_;\};}
\DoxyCodeLine{171 }
\DoxyCodeLine{172             size\_t len() \textcolor{keyword}{const} \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len();\}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174             \textcolor{keyword}{friend} std::ostream\& operator<<(std::ostream\& os, \textcolor{keyword}{const} \textcolor{keyword}{class} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \& string);}
\DoxyCodeLine{175 }
\DoxyCodeLine{176             \textcolor{keywordtype}{bool} isvalid() \textcolor{keyword}{const} \{}
\DoxyCodeLine{177                 \textcolor{keywordflow}{return} \mbox{\hyperlink{classjclib_1_1CountedPointer_aba4799319512576d8873edd9239d7073}{isset}}\mbox{\hyperlink{classjclib_1_1CountedPointer_aba4799319512576d8873edd9239d7073}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_aba4799319512576d8873edd9239d7073}{)}};}
\DoxyCodeLine{178             \}}
\DoxyCodeLine{179 }
\DoxyCodeLine{180             \textcolor{comment}{// create from an existing base}}
\DoxyCodeLine{181             \textcolor{comment}{// shouldn't really happen, but who knows}}
\DoxyCodeLine{182             \textcolor{comment}{// what changes will occur in the future or}}
\DoxyCodeLine{183             \textcolor{comment}{// either lemon or re2c does something weird}}
\DoxyCodeLine{184             \textcolor{comment}{// in its generated code?}}
\DoxyCodeLine{185             jString( Private::\mbox{\hyperlink{structjclib_1_1Private_1_1jStringBase}{jStringBase}} *base )}
\DoxyCodeLine{186                 : \mbox{\hyperlink{classjclib_1_1CountedPointer}{CountedPointer}}<jStringBase>(base ? base : \mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{get\_empty}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{(}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{)}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{.}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}} )}
\DoxyCodeLine{187              \{\}}
\DoxyCodeLine{188             \textcolor{comment}{// Create empty string}}
\DoxyCodeLine{189             jString( ):}
\DoxyCodeLine{190                 \mbox{\hyperlink{classjclib_1_1CountedPointer}{CountedPointer}}<jStringBase>(\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{get\_empty}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{(}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{)}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{.}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}})}
\DoxyCodeLine{191                 \{\}}
\DoxyCodeLine{192             \textcolor{comment}{// Create from c string}}
\DoxyCodeLine{193             jString( \textcolor{keyword}{const} \textcolor{keywordtype}{char} * source ):}
\DoxyCodeLine{194                 \mbox{\hyperlink{classjclib_1_1CountedPointer}{CountedPointer}}<jStringBase>(}
\DoxyCodeLine{195                     (source \&\& *source )}
\DoxyCodeLine{196                         ? jStringBase::create(source, strlen(source))}
\DoxyCodeLine{197                         : \mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{get\_empty}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{(}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{)}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{.}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}})}
\DoxyCodeLine{198                 \{\}}
\DoxyCodeLine{199             \textcolor{comment}{// Create from start of c string}}
\DoxyCodeLine{200             jString( \textcolor{keyword}{const} \textcolor{keywordtype}{char} * source, std::size\_t len ):}
\DoxyCodeLine{201                 \mbox{\hyperlink{classjclib_1_1CountedPointer}{CountedPointer}}<jStringBase>(}
\DoxyCodeLine{202                     (source \&\& len )}
\DoxyCodeLine{203                         ? jStringBase::create(source, len)}
\DoxyCodeLine{204                         : \mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{get\_empty}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{(}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{)}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{.}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}) \textcolor{comment}{// NB: len ignored}}
\DoxyCodeLine{205                 \{\}}
\DoxyCodeLine{206             \textcolor{comment}{// Create from two pointers to the same buffer}}
\DoxyCodeLine{207             \textcolor{comment}{// NB: This is what re2c gives on a match}}
\DoxyCodeLine{208             jString( \textcolor{keyword}{const} \textcolor{keywordtype}{char} * start, \textcolor{keyword}{const} \textcolor{keywordtype}{char} * end ):}
\DoxyCodeLine{209                 \mbox{\hyperlink{classjclib_1_1CountedPointer}{CountedPointer}}<jStringBase>(}
\DoxyCodeLine{210                     ( start \&\& (start != end ))}
\DoxyCodeLine{211                         ? jStringBase::create(start, end-\/start)}
\DoxyCodeLine{212                         : \mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{get\_empty}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{(}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{)}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{.}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}) \textcolor{comment}{// NB: end ignored}}
\DoxyCodeLine{213                 \{\}}
\DoxyCodeLine{214 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{ifdef} \textcolor{preprocessor}{\_\_cpp\_lib\_string\_view}}
\DoxyCodeLine{215             \textcolor{comment}{// Create from std::string\_view}}
\DoxyCodeLine{216             \textcolor{comment}{// std::string\_view was added by C++-\/17 standard so should always be in modern std libs}}
\DoxyCodeLine{217             \textcolor{comment}{// NB: Same as previous, really}}
\DoxyCodeLine{218             \mbox{\hyperlink{classjclib_1_1jString}{jString}}( \textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{std}}::\mbox{\hyperlink{classjclib_1_1jString}{string\_view}} \& \mbox{\hyperlink{classjclib_1_1jString}{view}} ):}
\DoxyCodeLine{219                 \mbox{\hyperlink{classjclib_1_1jString}{CountedPointer}}<\mbox{\hyperlink{classjclib_1_1jString}{jStringBase}}>(\mbox{\hyperlink{classjclib_1_1jString}{jStringBase}}::\mbox{\hyperlink{classjclib_1_1jString}{create}}(\mbox{\hyperlink{classjclib_1_1jString}{view}}.\mbox{\hyperlink{classjclib_1_1jString}{begin}}(), \mbox{\hyperlink{classjclib_1_1jString}{view}}.\mbox{\hyperlink{classjclib_1_1jString}{length}}()))}
\DoxyCodeLine{220                 \{\}}
\DoxyCodeLine{221             \textcolor{comment}{// Cast to std::string\_view}}
\DoxyCodeLine{222             \mbox{\hyperlink{classjclib_1_1jString}{operator}} \mbox{\hyperlink{classjclib_1_1jString}{std}}::\mbox{\hyperlink{classjclib_1_1jString}{string\_view}} () \textcolor{keyword}{const} \{}
\DoxyCodeLine{223                \textcolor{keywordflow}{return} \mbox{\hyperlink{classjclib_1_1jString}{std}}::\mbox{\hyperlink{classjclib_1_1jString}{string\_view}}( \mbox{\hyperlink{classjclib_1_1jString}{data}}(), \mbox{\hyperlink{classjclib_1_1jString}{len}}() );}
\DoxyCodeLine{224             \}}
\DoxyCodeLine{225 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{endif}}
\DoxyCodeLine{226             \textcolor{comment}{// string concatenation}}
\DoxyCodeLine{227             \mbox{\hyperlink{classjclib_1_1jString}{jString}} operator + (\textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \{}
\DoxyCodeLine{228                 jStringBase * lhs\_base = \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}};}
\DoxyCodeLine{229                 \textcolor{keywordflow}{if}( lhs\_base-\/>len\_ == 0 )}
\DoxyCodeLine{230                     \textcolor{keywordflow}{return} rhs;}
\DoxyCodeLine{231                 \textcolor{keywordflow}{if}( rhs.len() == 0 )}
\DoxyCodeLine{232                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{233                 \textcolor{keyword}{auto} len = lhs\_base-\/>len\_ + rhs-\/>len\_;}
\DoxyCodeLine{234                 jStringBase * new\_base = jStringBase::create(lhs\_base-\/>data\_,len );}
\DoxyCodeLine{235                 strncpy(new\_base-\/>data\_ + lhs\_base-\/>len\_,rhs-\/>data\_, rhs-\/>len\_ );}
\DoxyCodeLine{236                 new\_base-\/>data\_[len]=\textcolor{stringliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{237                 \textcolor{keywordflow}{return} new\_base;}
\DoxyCodeLine{238             \}}
\DoxyCodeLine{239             \textcolor{comment}{// extract substrings (left, right, any) with}}
\DoxyCodeLine{240             \textcolor{comment}{// silent bounds checks.}}
\DoxyCodeLine{241             \textcolor{comment}{// E.g. if z=="{}123"{}, z.substr(2,999) will quietly return "{}3"{}}}
\DoxyCodeLine{242             \textcolor{comment}{// NB: Const but when the whole string is to be }}
\DoxyCodeLine{243             \textcolor{comment}{// returned, we return a copy of ourself not a}}
\DoxyCodeLine{244             \textcolor{comment}{// whole new string. This saves creating a new }}
\DoxyCodeLine{245             \textcolor{comment}{// jStringBase.}}
\DoxyCodeLine{246             \mbox{\hyperlink{classjclib_1_1jString}{jString}} left(std::size\_t len) \textcolor{keyword}{const} \{}
\DoxyCodeLine{247                 \textcolor{keyword}{auto} ilen=std::min(len,\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_);}
\DoxyCodeLine{248                 \textcolor{keywordflow}{if}(ilen == \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_)}
\DoxyCodeLine{249                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{250                 \textcolor{keywordflow}{return} jStringBase::create(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, ilen );}
\DoxyCodeLine{251             \}}
\DoxyCodeLine{252             \mbox{\hyperlink{classjclib_1_1jString}{jString}} right(std::size\_t len) \textcolor{keyword}{const} \{}
\DoxyCodeLine{253                 \textcolor{keyword}{auto} ilen=std::min(len,\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_);}
\DoxyCodeLine{254                 \textcolor{keywordflow}{if}(ilen == \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_)}
\DoxyCodeLine{255                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{256                 \textcolor{keyword}{auto} start=\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_-\/ilen;}
\DoxyCodeLine{257                 \textcolor{keywordflow}{return} jStringBase::create(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_+start, ilen );}
\DoxyCodeLine{258             \}}
\DoxyCodeLine{259             \mbox{\hyperlink{classjclib_1_1jString}{jString}} substr(std::size\_t start, std::size\_t len) \textcolor{keyword}{const} \{}
\DoxyCodeLine{260                 \textcolor{keywordflow}{if}( start >= \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_ )\{}
\DoxyCodeLine{261                     \textcolor{keywordflow}{return} \mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{get\_empty}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{(}}\mbox{\hyperlink{classjclib_1_1jString_a64b12d83c87606faedf066ad33c07f53}{)}};}
\DoxyCodeLine{262                 \}}
\DoxyCodeLine{263                 \textcolor{keyword}{auto} ilen=std::min(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_-\/start, len);}
\DoxyCodeLine{264                 \textcolor{keywordflow}{if}(ilen == \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>len\_)}
\DoxyCodeLine{265                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{266                 \textcolor{keywordflow}{return} jStringBase::create(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_+start,ilen);}
\DoxyCodeLine{267             \}}
\DoxyCodeLine{268 }
\DoxyCodeLine{269             \mbox{\hyperlink{classjclib_1_1jString}{jString}} pad(std::size\_t length, \textcolor{keywordtype}{char} pad\_char = \textcolor{stringliteral}{' '} ) \textcolor{keyword}{const} \{}
\DoxyCodeLine{270                 \textcolor{keywordflow}{if}( length <= len())}
\DoxyCodeLine{271                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{272 }
\DoxyCodeLine{273                 jStringBase * new\_stringBase = jStringBase::create(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, length );}
\DoxyCodeLine{274 }
\DoxyCodeLine{275                 \textcolor{keywordtype}{char} * pad\_ptr = new\_stringBase-\/>data\_ + len();}
\DoxyCodeLine{276                 \textcolor{keywordflow}{for}( ; pad\_ptr < new\_stringBase-\/>data\_ + length; ++ pad\_ptr ) \{}
\DoxyCodeLine{277                     *pad\_ptr = pad\_char;}
\DoxyCodeLine{278                 \}}
\DoxyCodeLine{279                 *pad\_ptr = \textcolor{stringliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{280                 \textcolor{keywordflow}{return} new\_stringBase;}
\DoxyCodeLine{281             \}}
\DoxyCodeLine{282 }
\DoxyCodeLine{283             \textcolor{comment}{/*** Split string on delim, returning answers as an array of strings,}}
\DoxyCodeLine{284 \textcolor{comment}{             *   once max\_splits copies of the delimiter have been found, the }}
\DoxyCodeLine{285 \textcolor{comment}{             * remainder if any is a single string at the end of the array.}}
\DoxyCodeLine{286 \textcolor{comment}{            */}}
\DoxyCodeLine{287             std::vector<\mbox{\hyperlink{classjclib_1_1jString}{jString}}> split(\textcolor{keyword}{const} \textcolor{keywordtype}{char} * delim, \textcolor{keywordtype}{int} max\_splits=std::numeric\_limits<\textcolor{keywordtype}{int}>::max() ) \textcolor{keyword}{const} \{}
\DoxyCodeLine{288                 std::vector<\mbox{\hyperlink{classjclib_1_1jString}{jString}}> answer;}
\DoxyCodeLine{289                 \textcolor{keyword}{const} \textcolor{keywordtype}{char} * buffer = \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_;}
\DoxyCodeLine{290                 \textcolor{keyword}{const} \textcolor{keywordtype}{char} * buffer\_end = buffer+len();}
\DoxyCodeLine{291                 \textcolor{keyword}{const} \textcolor{keywordtype}{int} step = strlen(delim);}
\DoxyCodeLine{292                 \textcolor{keyword}{auto} position = strstr( buffer, delim );}
\DoxyCodeLine{293                 \textcolor{keywordflow}{if}( position == \textcolor{keywordtype}{nullptr} )\{}
\DoxyCodeLine{294                     answer.push\_back(*\textcolor{keyword}{this});}
\DoxyCodeLine{295                     \textcolor{keywordflow}{return} answer;}
\DoxyCodeLine{296                 \}}
\DoxyCodeLine{297                 \textcolor{keywordflow}{for}(    ;}
\DoxyCodeLine{298                         position != \textcolor{keywordtype}{nullptr} \&\& max\_splits != 0;}
\DoxyCodeLine{299                         -\/-\/max\_splits )\{}
\DoxyCodeLine{300                     \mbox{\hyperlink{classjclib_1_1jString}{jString}} chunk(buffer,position);}
\DoxyCodeLine{301                     answer.push\_back( chunk );}
\DoxyCodeLine{302                     buffer += chunk.len() + step;}
\DoxyCodeLine{303                     position = (buffer < buffer\_end) ? strstr( buffer, delim ) : \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{304                 \}}
\DoxyCodeLine{305                 \textcolor{keywordflow}{if}( buffer < buffer\_end ) \{}
\DoxyCodeLine{306                     answer.push\_back(\mbox{\hyperlink{classjclib_1_1jString}{jString}}(buffer));}
\DoxyCodeLine{307                 \}}
\DoxyCodeLine{308                 \textcolor{keywordflow}{return} answer;}
\DoxyCodeLine{309             \}}
\DoxyCodeLine{310 }
\DoxyCodeLine{311             \textcolor{comment}{/** Return position of first occurrence of findee */}}
\DoxyCodeLine{312             \textcolor{keywordtype}{int} \mbox{\hyperlink{classjclib_1_1jString_ad1d51cf9e884aabcbf0387edc40a9eb2}{find}}( \mbox{\hyperlink{classjclib_1_1jString}{jString}} findee ) \{}
\DoxyCodeLine{313                 \textcolor{keyword}{auto} buffer = data();}
\DoxyCodeLine{314                 \textcolor{keyword}{auto} findee\_chars = findee.data();}
\DoxyCodeLine{315                 \textcolor{keyword}{auto} position = strstr( buffer, findee\_chars );}
\DoxyCodeLine{316                 \textcolor{keywordflow}{if}( position == \textcolor{keywordtype}{nullptr} )}
\DoxyCodeLine{317                     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{318                 \textcolor{keywordflow}{return} position -\/ buffer;}
\DoxyCodeLine{319             \}}
\DoxyCodeLine{320 }
\DoxyCodeLine{321             \textcolor{comment}{/** Check is only all alphabetic ascii characters */}}
\DoxyCodeLine{322             \textcolor{keywordtype}{bool} \mbox{\hyperlink{classjclib_1_1jString_ab0d1653253c0c5636e524628cd0b0a27}{isalpha}}() \{}
\DoxyCodeLine{323                 \textcolor{keywordflow}{if}( len() == 0 )}
\DoxyCodeLine{324                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{325                 \textcolor{keywordflow}{for}( \textcolor{keyword}{const} \textcolor{keywordtype}{char} * c = data(); *c; ++c) \{}
\DoxyCodeLine{326                     \textcolor{keywordflow}{if}( ! std::isalpha(*c) )}
\DoxyCodeLine{327                         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{328                 \}}
\DoxyCodeLine{329                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{330             \}}
\DoxyCodeLine{331 }
\DoxyCodeLine{332             \textcolor{comment}{/** Check all alphabetic ascii characters in string are upper case */}}
\DoxyCodeLine{333             \textcolor{keywordtype}{bool} \mbox{\hyperlink{classjclib_1_1jString_aae84c1413b3d137a21fecb495c059ef1}{isupper}}() \{}
\DoxyCodeLine{334                 \textcolor{keywordflow}{if}( len() == 0 )}
\DoxyCodeLine{335                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{336                 \textcolor{keywordflow}{for}( \textcolor{keyword}{const} \textcolor{keywordtype}{char} * c = data(); *c; ++c) \{}
\DoxyCodeLine{337                     \textcolor{keywordflow}{if}( std::isalpha(*c) \&\& ! std::isupper(*c))}
\DoxyCodeLine{338                         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{339                 \}}
\DoxyCodeLine{340                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{341             \}}
\DoxyCodeLine{342 }
\DoxyCodeLine{343             \textcolor{comment}{/** Check all alphabetic ascii characters in string are upper case */}}
\DoxyCodeLine{344             \textcolor{keywordtype}{bool} \mbox{\hyperlink{classjclib_1_1jString_ae9c51457a9e150c838de713183783814}{islower}}() \{}
\DoxyCodeLine{345                 \textcolor{keywordflow}{if}( len() == 0 )}
\DoxyCodeLine{346                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{347                 \textcolor{keywordflow}{for}( \textcolor{keyword}{const} \textcolor{keywordtype}{char} * c = data(); *c; ++c) \{}
\DoxyCodeLine{348                     \textcolor{keywordflow}{if}( std::isalpha(*c) \&\& ! std::islower(*c))}
\DoxyCodeLine{349                         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{350                 \}}
\DoxyCodeLine{351                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{352             \}}
\DoxyCodeLine{353 }
\DoxyCodeLine{354             \textcolor{comment}{/** Join elements in an iterable into a new string}}
\DoxyCodeLine{355 \textcolor{comment}{             *  with the elements separated by our value.}}
\DoxyCodeLine{356 \textcolor{comment}{             *  Elements must be valid for jString constructors.}}
\DoxyCodeLine{357 \textcolor{comment}{             *  Based on Python's str.join() method}}
\DoxyCodeLine{358 \textcolor{comment}{             */}}
\DoxyCodeLine{359             \textcolor{keyword}{template}<\textcolor{keyword}{class} T> \mbox{\hyperlink{classjclib_1_1jString}{jString}} \mbox{\hyperlink{classjclib_1_1jString_a003c161a28051c3ce6390a45841ba38f}{join}}( \textcolor{keyword}{const} T \& input ) \{}
\DoxyCodeLine{360                 size\_t total\_length = 0;}
\DoxyCodeLine{361                 std::vector<\mbox{\hyperlink{classjclib_1_1jString}{jString}}> strings; \textcolor{comment}{// No guarantee that input can be parsed twice}}
\DoxyCodeLine{362                 \textcolor{keywordflow}{for}( \mbox{\hyperlink{classjclib_1_1jString}{jString}} bit : input ) \{}
\DoxyCodeLine{363                     strings.push\_back( bit );}
\DoxyCodeLine{364                     total\_length += bit.len() + len();}
\DoxyCodeLine{365                 \}}
\DoxyCodeLine{366                 total\_length = total\_length + 1 -\/ len();}
\DoxyCodeLine{367                 jStringBase * answer = jStringBase::create(total\_length);}
\DoxyCodeLine{368                 \textcolor{keywordtype}{char} * out = \textcolor{keyword}{const\_cast}<\textcolor{keywordtype}{char} *>(answer-\/>data\_);}
\DoxyCodeLine{369                 \textcolor{keywordtype}{bool} first = \textcolor{keyword}{true};}
\DoxyCodeLine{370                 \textcolor{keywordflow}{for}( \mbox{\hyperlink{classjclib_1_1jString}{jString}} bit : strings ) \{}
\DoxyCodeLine{371                     \textcolor{keywordflow}{if}( first )}
\DoxyCodeLine{372                         first = \textcolor{keyword}{false};}
\DoxyCodeLine{373                     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{374                         memmove(out, data(), len());}
\DoxyCodeLine{375                         out+=len();}
\DoxyCodeLine{376                     \}}
\DoxyCodeLine{377                     memmove(out, bit.data(), bit.len());}
\DoxyCodeLine{378                     out+=bit.len();}
\DoxyCodeLine{379                 \}}
\DoxyCodeLine{380                 *out=\textcolor{stringliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{381                 \textcolor{keywordflow}{return} answer;}
\DoxyCodeLine{382             \}}
\DoxyCodeLine{383 }
\DoxyCodeLine{384             \textcolor{comment}{/** Comparison function, provides C strcmp on strings*/}}
\DoxyCodeLine{385             \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{classjclib_1_1jString_acdff73b23041ade42bada788c90f1941}{compare}}( \textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{386                 \textcolor{keywordflow}{return} strcmp( \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_ );}
\DoxyCodeLine{387             \}}
\DoxyCodeLine{388 }
\DoxyCodeLine{389             \textcolor{comment}{/** Comparison function, provides C strcoll on strings*/}}
\DoxyCodeLine{390             \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{classjclib_1_1jString_aef72a3e29dea2ff3ad2b6509578b212e}{compare\_locale}}( \textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{391                 \textcolor{keywordflow}{return} strcoll( \mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_ );}
\DoxyCodeLine{392             \}}
\DoxyCodeLine{393 }
\DoxyCodeLine{394             \textcolor{keywordtype}{bool} operator < (\textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{395                 \textcolor{keywordflow}{return} strcmp(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_) < 0;}
\DoxyCodeLine{396             \}}
\DoxyCodeLine{397             \textcolor{keywordtype}{bool} operator <= (\textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{398                 \textcolor{keywordflow}{return} strcmp(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_) <= 0;}
\DoxyCodeLine{399             \}}
\DoxyCodeLine{400             \textcolor{keywordtype}{bool} operator > (\textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{401                 \textcolor{keywordflow}{return} strcmp(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_) > 0;}
\DoxyCodeLine{402             \}}
\DoxyCodeLine{403             \textcolor{keywordtype}{bool} operator >= (\textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{404                 \textcolor{keywordflow}{return} strcmp(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_) >= 0;}
\DoxyCodeLine{405             \}}
\DoxyCodeLine{406             \textcolor{keywordtype}{bool} operator == (\textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{407                 \textcolor{keywordflow}{return} strcmp(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_) == 0;}
\DoxyCodeLine{408             \}}
\DoxyCodeLine{409             \textcolor{keywordtype}{bool} operator == (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{410                 \textcolor{keywordflow}{return} strcmp(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, \mbox{\hyperlink{classjclib_1_1jString}{jString}}(rhs)-\/>data\_) == 0;}
\DoxyCodeLine{411             \}}
\DoxyCodeLine{412             \textcolor{keywordtype}{bool} operator != (\textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \&rhs) \textcolor{keyword}{const} \{}
\DoxyCodeLine{413                 \textcolor{keywordflow}{return} strcmp(\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{get}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{(}}\mbox{\hyperlink{classjclib_1_1CountedPointer_a141b33afc3d099c221036d874d73095e}{)}}-\/>data\_, rhs-\/>data\_) != 0;}
\DoxyCodeLine{414             \}}
\DoxyCodeLine{415     \};}
\DoxyCodeLine{416 }
\DoxyCodeLine{417 }
\DoxyCodeLine{418     \textcolor{keyword}{inline} std::ostream\& operator<<(std::ostream\& os, \textcolor{keyword}{const} \mbox{\hyperlink{classjclib_1_1jString}{jString}} \& string) \{}
\DoxyCodeLine{419         os << string.data();}
\DoxyCodeLine{420         \textcolor{keywordflow}{return} os;}
\DoxyCodeLine{421     \}}
\DoxyCodeLine{422 \};}
\DoxyCodeLine{423 }
\DoxyCodeLine{424 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{endif}}

\end{DoxyCode}
